<!DOCTYPE html>
<html langt="de">
	<!-- First Try -->
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<title> AJAX Tests</title>
		<script>
            function changeContent(){
                var xmlhttp;
                
                if(window.XMLHttpRequest){  // IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp = new XMLHttpRequest();
                }
                else {  // I5 & IE6
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }

                xmlhttp.onreadystatechange = function(){
                    if(xmlhttp.readyState==4 && xmlhttp.status==200){
                        document.getElementById("dynamic01").innerHTML = xmlhttp.responseText;
                    }                    
                }
                xmlhttp.open("GET", "server-time.php", true);
                xmlhttp.send();
            }

            function zeitstempel(){
                var heute = new Date();
                document.getElementById("dynamic02").innerHTML = heute;
            }

        </script>
        <script>
            var xmlhttp = null;

            function recalculate(str){
                
                if (window.XMLHttpRequest){
                    xmlhttp = new XMLHttpRequest();
                }
                else{
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlhttp.open("GET", "calculate.php?meter="+str,true);
                xmlhttp.onreadystatechange = parseRecalculate;  // Callback Funktion
                xmlhttp.send();
            }


            function parseRecalculate(){
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
                    // Antwort des Servers
                    var xml = xmlhttp.responseXML;
                    var meilen_response = xml.getElementsByTagName("meilen")[0];
                    var yard_response = xml.getElementsByTagName("yard")[0];


                    document.getElementsById("meilen").value = meilen_response.firstChild.nodeValue;
                    document.getElementById("yard").value = yard_response.firstChild.nodeValue;
                }
                else{
                    document.getElementById("meilen").value = 0;
                    documen.getElementById("yard").value = 0;
                }

            }
        
        </script>


	</head>
        <body onload="zeitstempel()">            
            <h1>Ajax tests</h1>
            <p id="dynamic01">
                Mit Ajax soll die Zeit des Servers berechnet werden und dieser Text mit der Uhrzeit ersetzt werden
            </p>
            <button type="button" onclick="changeContent()">Zeit Erneuern</button>
            <!-- Zeit die beim Seitenladen angezeigt wird -->
            <p id="dynamic02"></p>


            <h1>Umrechnen von Einheiten</h1>
            <form>
                <fieldset>
                    <legend>Meter in Meilen umrechnen</legend>
                    <label>Meter: </label>
                    <input type="number" id="meter" placeholder="Wert in Meter" 
                        onmouseup="recalculate(this.value);"> m

                    <br><label>Meilen: </label>
                    <input type="number" id="meilen" placeholder="Wert in Meilen" readonly> mi
                    
                    <br><label>Yard: </label>
                    <input type="number" id="yard" placeholder="Wert in Yard" readonly> yds
                </fieldset>


            </form>

        </body>
</html>
